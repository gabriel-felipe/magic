 $(document).ready(function(){
	var ajax = new majax;
	ajax.on(
		200,
		function(msg,data){
			$("link").addClass("old");
			$("head").append(data["css"]);
			window.setTimeout(function(){
				$("link.old").remove();
				ajax.post(magic_route,{"css_only":true});
			},100);
		}
	);
	ajax.on(
		304,
		function(msg){
			console.log(msg);
			window.setTimeout(function(){
				ajax.post(magic_route,{"css_only":true});
			},100);
		}
	)
	ajax.onError = function(){
		window.setTimeout(function(){
			ajax.post(magic_route,{"css_only":true});
		},100);
	}
	window.setTimeout(function(){
		ajax.post(magic_route,{"css_only":true});
	},2000)
})
 $(document).ready(function(){
	var ajaxReloadOnSave = new majax;
	ajaxReloadOnSave.on(200,function(msg,data){
		location.reload();
	})
	ajaxReloadOnSave.on(304,function(msg){
		console.log(msg);
		window.setTimeout(function(){
			ajaxReloadOnSave.post(magic_route,{"checkReload":true});
		},400)
	})
	ajaxReloadOnSave.onError = function(){
		console.log("error");
		window.setTimeout(function(){
			ajaxReloadOnSave.post(magic_route,{"checkReload":true});
		},400)
	}
	window.setTimeout(function(){
		ajaxReloadOnSave.post(magic_route,{"checkReload":true});
	},2000)
});
